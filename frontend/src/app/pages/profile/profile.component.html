<div class="container mt-5">
  <!-- Profile Section -->
  <div class="text-center mb-4">
    <img
      src="https://t4.ftcdn.net/jpg/03/46/93/61/360_F_346936114_RaxE6OQogebgAWTalE1myseY1Hbb5qPM.jpg"
      alt="Profile Image"
      class="profile-image mb-3"
    />
    <h6 class="user-name">{{ user?.firstName }} {{ user?.lastName }}</h6>
  </div>

  <!-- Edit Profile Form -->
  <div *ngIf="isEditing" class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card shadow-sm">
        <div class="card-body">
          <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input
                type="text"
                id="firstName"
                class="form-control"
                placeholder="First Name"
                formControlName="firstName"
                required
              />
            </div>

            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input
                type="text"
                id="lastName"
                class="form-control"
                placeholder="Last Name"
                formControlName="lastName"
                required
              />
            </div>

            <div class="form-group">
              <label for="username">Username</label>
              <input
                type="text"
                id="username"
                class="form-control"
                placeholder="Username"
                formControlName="username"
                required
              />
            </div>

            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="email"
                id="email"
                class="form-control"
                placeholder="Email"
                formControlName="email"
                required
              />
            </div>

            <div class="form-group">
              <label for="phone">Phone</label>
              <input
                type="text"
                id="phone"
                class="form-control"
                placeholder="Phone"
                formControlName="phone"
                required
              />
            </div>

            <div class="text-center mt-3">
              <button
                type="submit"
                class="btn btn-primary"
                [disabled]="profileForm.invalid"
              >
                Save Changes
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                (click)="cancelEdit()"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- View Profile Section -->
  <div *ngIf="!isEditing && user" class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card shadow-lg rounded">
        <div class="card-body">
          <h3 class="card-title text-center mb-4">User Information</h3>
          <table class="table table-striped table-hover text-center">
            <tbody>
              <tr>
                <th>Username</th>
                <td>{{ user.username }}</td>
              </tr>
              <tr>
                <th>User ID</th>
                <td>EXAM{{ user.id }}</td>
              </tr>
              <tr>
                <th>Phone</th>
                <td>{{ user.phone }}</td>
              </tr>
              <tr>
                <th>Role</th>
                <td>{{ user.role }}</td>
              </tr>
              <tr>
                <th>Status</th>
                <td>
                  <span class="badge" [ngClass]="{'badge-success': user.enabled, 'badge-danger': !user.enabled}">
                    {{ user.enabled ? 'ACTIVE' : 'NOT ACTIVE' }}
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
          <!-- <div class="text-center mt-3">
            <button class="btn btn-success" (click)="onUpdate()">UPDATE</button>
          </div> -->
        </div>
      </div>
    </div>
  </div>

  <!-- Loading state -->
  <div *ngIf="!user" class="text-center">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <p>Loading...</p>
  </div>
</div>
